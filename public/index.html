<!DOCTYPE html>
<html ng-app='ProductSearch'>
  <head>
    <title>Find My Items</title>
    <script type='text/javascript' src='angular.min.js'></script>
    <script type='text/javascript' src='client.js'></script>
  </head>
  <body ng-controller='SearchController as searchController'>
    <h3>Find My Items</h3>
    <form ng-submit='searchController.submit()'>
      <strong>I'm looking for</strong>
      <input autofocus placeholder='Groot' ng-model='searchController.query'>
      <strong>near zipcode</strong>
      <input ng-model='searchController.zipcode'>
      <input type='submit' value='Search' ng-disabled='searchController.isRunning'>
    </form>
    <p ng-if='searchController.isRunning'>Loading...</p>
    <table style='width:100%'>
      <tr ng-repeat='products in searchController.searchResults'>
        <td><a href='{{products[0].url}}'><img src='{{products[0].imageURL}}'></a></td>
        <td>
          <a href='{{products[0].url}}'>{{products[0].name}}</a>
          <p><strong>{{products[0].price}}</strong></p>
          <p>{{products[0].store.city}}, {{products[0].store.region}}</p>
          <p>Distance: {{products[0].store.distance}} miles</p>
        </td>
        <td>
          <p>Available at:</p>
          <p ng-repeat='product in products'>
            <a href='{{product.url}}'><strong>{{product.store.type}}</strong></a>
            {{product.store.city}}, {{product.store.region}}
          </p>
        </td>
      </tr>
    </table>

  </body>
</html>
